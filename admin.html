<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –ú–∞–Ω–∏–∫—é—Ä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíÖ</text></svg>">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #fdf4ff;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 50%, #8b5cf6 100%);
        }

        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease-out;
        }

        .scroll-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .table-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            overflow-x: auto;
        }

        .status-new {
            background-color: #fef3c7;
            color: #d97706;
        }

        .status-processed {
            background-color: #d1fae5;
            color: #10b981;
        }

        .status-cancelled {
            background-color: #fee2e2;
            color: #ef4444;
        }

        .action-btn:hover {
            transform: scale(1.05);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 50%, #8b5cf6 100%);
            padding: 1rem;
            text-align: center;
            color: white;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 0.75rem 1.5rem;
            background-color: #f9fafb;
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .close-modal-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .close-modal-btn:hover {
            transform: scale(1.2);
        }

        .nail-polish {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #ff9ff3 0%, #f368e0 100%);
            border-radius: 50%;
            opacity: 0.1;
            z-index: -1;
        }

        .nail-polish-1 { top: 10%; left: 5%; }
        .nail-polish-2 { bottom: 15%; right: 7%; }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen relative overflow-x-hidden">
    <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="nail-polish nail-polish-1"></div>
    <div class="nail-polish nail-polish-2"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è -->
    <div id="auth-modal" class="modal-overlay active">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="text-lg font-bold">–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
                <button class="close-modal-btn" id="close-auth-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="mb-4">
                    <label for="admin-password" class="block text-primary-700 mb-2 font-medium">–ü–∞—Ä–æ–ª—å</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-lock text-primary-400"></i>
                        </div>
                        <input type="password" id="admin-password" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                </div>
                <div id="auth-error" class="hidden text-red-600 text-sm mb-4">
                    –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.
                </div>
            </div>
            <div class="modal-footer">
                <button id="submit-password" class="px-4 py-2 bg-primary-600 text-white rounded-full font-semibold hover:bg-primary-700 transition">
                    –í–æ–π—Ç–∏
                </button>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div id="admin-content" class="hidden">
        <header class="gradient-bg text-white shadow-lg scroll-reveal">
            <div class="container mx-auto px-4 py-6">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spa text-3xl"></i>
                        <div>
                            <h1 class="text-2xl md:text-3xl font-bold">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                            <p class="text-sm text-primary-200">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                        </div>
                    </div>
                    <a href="index.html" class="bg-white text-primary-700 px-4 py-2 rounded-full font-semibold hover:bg-primary-100 transition flex items-center">
                        <i class="fas fa-home mr-2"></i>–ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </a>
                </div>
            </div>
        </header>

        <main class="container mx-auto px-4 py-8">
            <section class="scroll-reveal">
                <div class="flex items-center mb-8">
                    <div class="bg-primary-100 p-3 rounded-full mr-4">
                        <i class="fas fa-list-alt text-primary-700 text-xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-primary-800">–ó–∞–ø–∏—Å–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
                </div>

                <div class="mb-6 flex flex-wrap gap-3">
                    <button id="filter-all" class="px-4 py-2 bg-primary-600 text-white rounded-full font-medium hover:bg-primary-700 transition">–í—Å–µ</button>
                    <button id="filter-new" class="px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium hover:bg-primary-200 transition">–ù–æ–≤—ã–µ</button>
                    <button id="filter-processed" class="px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium hover:bg-primary-200 transition">–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ</button>
                    <button id="filter-cancelled" class="px-4 py-2 bg-primary-100 text-primary-700 rounded-full font-medium hover:bg-primary-200 transition">–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ</button>
                </div>

                <div class="table-container p-6">
                    <table class="w-full text-left">
                        <thead>
                            <tr class="text-primary-700">
                                <th class="py-3 px-4">ID</th>
                                <th class="py-3 px-4">–ö–ª–∏–µ–Ω—Ç</th>
                                <th class="py-3 px-4">–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                <th class="py-3 px-4">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                                <th class="py-3 px-4">–£—Å–ª—É–≥–∏</th>
                                <th class="py-3 px-4">–ó–∞–º–µ—Ç–∫–∏</th>
                                <th class="py-3 px-4">–°—Ç–∞—Ç—É—Å</th>
                                <th class="py-3 px-4">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="bookings-table" class="text-primary-800">
                            <!-- –ó–∞–ø–∏—Å–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

        <footer class="gradient-bg text-white py-8 mt-12 scroll-reveal">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-6 md:mb-0">
                        <div class="flex items-center">
                            <i class="fas fa-spa text-2xl mr-3"></i>
                            <h3 class="text-xl font-bold">–ú–∞–Ω–∏–∫—é—Ä</h3>
                        </div>
                        <p class="text-primary-200 mt-2">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –Ω–æ–≥—Ç—è–º–∏</p>
                    </div>
                    <div class="text-center text-primary-200 text-sm">
                        <p>¬© 2025 –ú–∞–Ω–∏–∫—é—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                        <p class="mt-1">–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, –ø–∞—Ä–æ–ª—å –∂–µ—Å—Ç–∫–æ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω)
        const ADMIN_PASSWORD = 'admin123';

        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            const authModal = document.getElementById('auth-modal');
            const adminContent = document.getElementById('admin-content');
            const submitPasswordBtn = document.getElementById('submit-password');
            const authError = document.getElementById('auth-error');
            const closeAuthModalBtn = document.getElementById('close-auth-modal');

            submitPasswordBtn.addEventListener('click', function() {
                const password = document.getElementById('admin-password').value;
                if (password === ADMIN_PASSWORD) {
                    authModal.classList.remove('active');
                    adminContent.classList.remove('hidden');
                    populateBookings('all');
                } else {
                    authError.classList.remove('hidden');
                }
            });

            closeAuthModalBtn.addEventListener('click', function() {
                authModal.classList.remove('active');
                window.location.href = 'index.html'; // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            });

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
            function formatDateForDisplay(dateStr) {
                const [year, month, day] = dateStr.split('-');
                const months = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
                return `${parseInt(day)} ${months[parseInt(month)-1]} ${year}`;
            }

            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–ø–∏—Å–µ–π
            function populateBookings(filter = 'all') {
                const bookingsTable = document.getElementById('bookings-table');
                bookingsTable.innerHTML = '';

                const bookings = JSON.parse(localStorage.getItem('bookings')) || [];
                const filteredBookings = filter === 'all' ? bookings : bookings.filter(b => b.status === filter);

                if (filteredBookings.length === 0) {
                    bookingsTable.innerHTML = `
                        <tr>
                            <td colspan="8" class="text-center py-4 text-gray-500">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</td>
                        </tr>
                    `;
                    return;
                }

                filteredBookings.forEach(booking => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-primary-100';
                    row.innerHTML = `
                        <td class="py-3 px-4">${booking.id}</td>
                        <td class="py-3 px-4">${booking.name}</td>
                        <td class="py-3 px-4">${booking.phone}</td>
                        <td class="py-3 px-4">${formatDateForDisplay(booking.date)} –≤ ${booking.time}</td>
                        <td class="py-3 px-4">${booking.services.join(', ')}</td>
                        <td class="py-3 px-4">${booking.notes || '‚Äî'}</td>
                        <td class="py-3 px-4">
                            <span class="px-2 py-1 rounded-full text-sm ${
                                booking.status === '–ù–æ–≤–∞—è' ? 'status-new' :
                                booking.status === '–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è' ? 'status-processed' :
                                'status-cancelled'
                            }">
                                ${booking.status}
                            </span>
                        </td>
                        <td class="py-3 px-4 flex gap-2">
                            <button class="action-btn bg-green-500 text-white px-3 py-1 rounded-lg hover:bg-green-600 transition" data-id="${booking.id}" data-action="processed">
                                <i class="fas fa-check"></i>
                            </button>
                            <button class="action-btn bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition" data-id="${booking.id}" data-action="cancelled">
                                <i class="fas fa-times"></i>
                            </button>
                        </td>
                    `;
                    bookingsTable.appendChild(row);
                });

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
                document.querySelectorAll('.action-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const bookingId = this.dataset.id;
                        const action = this.dataset.action;
                        updateBookingStatus(bookingId, action === 'processed' ? '–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è' : '–û—Ç–º–µ–Ω–µ–Ω–Ω–∞—è');
                    });
                });
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø–∏—Å–∏
            function updateBookingStatus(bookingId, newStatus) {
                let bookings = JSON.parse(localStorage.getItem('bookings')) || [];
                bookings = bookings.map(booking => {
                    if (booking.id == bookingId) {
                        return { ...booking, status: newStatus };
                    }
                    return booking;
                });
                localStorage.setItem('bookings', JSON.stringify(bookings));
                populateBookings(document.querySelector('.bg-primary-600')?.id.replace('filter-', '') || 'all');

                // –î–æ–±–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
                const booking = bookings.find(b => b.id == bookingId);
                if (booking) {
                    const notifications = JSON.parse(localStorage.getItem('notifications')) || [];
                    notifications.push({
                        phone: booking.phone,
                        message: `–í–∞—à–∞ –∑–∞–ø–∏—Å—å –Ω–∞ ${formatDateForDisplay(booking.date)} –≤ ${booking.time} –±—ã–ª–∞ ${newStatus.toLowerCase()}.`,
                        timestamp: new Date().toISOString(),
                        read: false
                    });
                    localStorage.setItem('notifications', JSON.stringify(notifications));
                }
            }

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π
            document.querySelectorAll('[id^="filter-"]').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('[id^="filter-"]').forEach(btn => {
                        btn.classList.remove('gradient-bg', 'text-white');
                        btn.classList.add('bg-primary-100', 'text-primary-700');
                    });
                    this.classList.add('gradient-bg', 'text-white');
                    this.classList.remove('bg-primary-100', 'text-primary-700');
                    populateBookings(this.id.replace('filter-', ''));
                });
            });

            // Scroll reveal animation
            const scrollElements = document.querySelectorAll('.scroll-reveal');
            const revealOnScroll = () => {
                scrollElements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const windowHeight = window.innerHeight;
                    if (elementTop < windowHeight - 100) {
                        element.classList.add('visible');
                    }
                });
            };

            window.addEventListener('scroll', revealOnScroll);
            revealOnScroll();
        });
    </script>
</body>
</html>