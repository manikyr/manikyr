<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞–Ω–∏–∫—é—Ä - –ó–∞–ø–∏—Å—å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíÖ</text></svg>">
    <script type="module" src="database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #fdf4ff;
        }

        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        .gradient-bg {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 50%, #8b5cf6 100%);
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }

        .fade-in {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .page-load {
            animation: pageLoad 1s ease-out;
        }

        @keyframes pageLoad {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease-out;
        }

        .scroll-reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .date-badge {
            transition: all 0.3s ease;
            min-width: 70px;
        }

        .date-badge:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.2);
        }

        .calendar-icon {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .time-badge {
            transition: all 0.2s ease;
        }

        .time-badge:hover {
            transform: scale(1.05);
            background-color: #f5f3ff;
        }

        .time-input:focus {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
        }

        .slide-in {
            animation: slideIn 0.3s forwards;
        }

        @keyframes slideIn {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .glow {
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
        }

        .service-checkbox:checked + .service-label {
            background-color: #7c3aed;
            color: white;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .booking-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.2);
        }

        .neumorphic {
            box-shadow: 8px 8px 16px #d1d5db,
                        -8px -8px 16px #ffffff;
            border-radius: 16px;
        }

        .neumorphic-inset {
            box-shadow: inset 4px 4px 8px #d1d5db,
                        inset -4px -4px 8px #ffffff;
        }

        .nail-polish {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, #ff9ff3 0%, #f368e0 100%);
            border-radius: 50%;
            opacity: 0.1;
            z-index: -1;
        }

        .nail-polish-1 { top: 10%; left: 5%; }
        .nail-polish-2 { bottom: 15%; right: 7%; }
        .nail-polish-3 { top: 25%; right: 20%; }
        .nail-polish-4 { bottom: 30%; left: 15%; }

        .selected-service {
            background-color: #ede9fe !important;
            border-color: #8b5cf6 !important;
        }

        .pulse-animation {
            animation: pulse 1.5s infinite;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .gallery-item {
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .gallery-img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-item:hover .gallery-img {
            transform: scale(1.05);
        }

        .about-content {
            background: linear-gradient(145deg, #ffffff, #f5f3ff);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        }

        .team-member {
            transition: transform 0.3s ease;
        }

        .team-member:hover {
            transform: translateY(-5px);
        }

        .stats-card {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            border-radius: 12px;
            padding: 1.5rem;
            color: white;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stats-card:hover {
            transform: translateY(-5px);
        }

        .hero-section {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1) 0%, rgba(107, 33, 168, 0.1) 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-nail {
            position: absolute;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, #ff9ff3 0%, #f368e0 100%);
            border-radius: 50%;
            opacity: 0.15;
            z-index: 1;
        }

        .hero-nail-1 { top: -30px; right: -30px; }
        .hero-nail-2 { bottom: -40px; left: -20px; }

        .hero-btn {
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.3);
        }

        .hero-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(139, 92, 246, 0.4);
        }

        .floating {
            animation: floating 3s ease-in-out infinite;
        }

        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .category-filter {
            transition: all 0.3s ease;
        }

        .category-filter:hover {
            transform: translateY(-2px);
        }

        .price-calculator {
            background: linear-gradient(145deg, #ffffff, #f5f3ff);
            border-radius: 12px;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
        }

        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 50%, #8b5cf6 100%);
            padding: 1.5rem;
            text-align: center;
            color: white;
            position: relative;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-footer {
            padding: 1rem 2rem;
            background-color: #f9fafb;
            display: flex;
            justify-content: center;
        }

        .confirmation-icon {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .confirmation-icon div {
            width: 80px;
            height: 80px;
            background-color: #d8f7e8;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .confirmation-icon i {
            font-size: 40px;
            color: #10b981;
        }

        .booking-details {
            background-color: #f5f3ff;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .booking-detail {
            display: flex;
            margin-bottom: 0.75rem;
        }

        .booking-detail:last-child {
            margin-bottom: 0;
        }

        .booking-detail i {
            width: 24px;
            color: #7c3aed;
            margin-right: 0.75rem;
        }

        .booking-detail div {
            flex: 1;
        }

        .booking-detail .label {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .booking-detail .value {
            font-weight: 600;
            color: #1f2937;
        }

        .address-card {
            background-color: #f5f3ff;
            border-radius: 12px;
            padding: 1.5rem;
            border-left: 4px solid #8b5cf6;
        }

        .map-container {
            height: 200px;
            background-color: #e5e7eb;
            border-radius: 8px;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
        }

        .close-modal-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .close-modal-btn:hover {
            transform: scale(1.2);
        }

        .notification {
            background: white;
            border-left: 4px solid #10b981;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0.375rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .compact-modal .modal-content {
            max-width: 400px;
        }

        .compact-modal .modal-header {
            padding: 1rem;
        }

        .compact-modal .modal-body {
            padding: 1.5rem;
        }

        .compact-modal .confirmation-icon div {
            width: 60px;
            height: 60px;
        }

        .compact-modal .confirmation-icon i {
            font-size: 30px;
        }

        .compact-modal .booking-details {
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .compact-modal .booking-detail {
            margin-bottom: 0.5rem;
        }

        .compact-modal .address-card {
            padding: 1rem;
        }

        .compact-modal .modal-footer {
            padding: 0.75rem 1.5rem;
        }

        .compact-modal h2 {
            font-size: 1.25rem;
        }

        .compact-modal h3 {
            font-size: 1rem;
        }

        .compact-modal .text-2xl {
            font-size: 1.25rem;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen relative overflow-x-hidden page-load">
    <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="nail-polish nail-polish-1"></div>
    <div class="nail-polish nail-polish-2"></div>
    <div class="nail-polish nail-polish-3"></div>
    <div class="nail-polish nail-polish-4"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
    <div id="confirmation-modal" class="modal-overlay compact-modal">
        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="text-lg font-bold">–ó–∞–ø–∏—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!</h3>
                <button class="close-modal-btn" id="close-modal-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirmation-icon">
                    <div>
                        <i class="fas fa-check-circle"></i>
                    </div>
                </div>

                <div class="text-center mb-4">
                    <h2 class="text-xl font-bold text-primary-800 mb-1">–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–ø–∏—Å—å!</h2>
                    <p class="text-sm text-gray-600">–ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å –≤ –Ω–∞—à–µ–º —Å–∞–ª–æ–Ω–µ</p>
                </div>

                <div class="booking-details">
                    <div class="booking-detail">
                        <i class="fas fa-user text-sm"></i>
                        <div>
                            <div class="label text-xs">–ö–ª–∏–µ–Ω—Ç</div>
                            <div class="value text-sm" id="confirmation-name"></div>
                        </div>
                    </div>
                    <div class="booking-detail">
                        <i class="fas fa-calendar-alt text-sm"></i>
                        <div>
                            <div class="label text-xs">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
                            <div class="value text-sm" id="confirmation-datetime"></div>
                        </div>
                    </div>
                    <div class="booking-detail">
                        <i class="fas fa-spa text-sm"></i>
                        <div>
                            <div class="label text-xs">–£—Å–ª—É–≥–∏</div>
                            <div class="value text-sm" id="confirmation-services"></div>
                        </div>
                    </div>
                    <div class="booking-detail">
                        <i class="fas fa-wallet text-sm"></i>
                        <div>
                            <div class="label text-xs">–°—Ç–æ–∏–º–æ—Å—Ç—å</div>
                            <div class="value text-sm" id="confirmation-price"></div>
                        </div>
                    </div>
                </div>

                <div class="address-card">
                    <h4 class="font-bold text-primary-800 text-sm mb-1">–ù–∞—à –∞–¥—Ä–µ—Å:</h4>
                    <p class="text-gray-700 text-sm">–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123</p>
                    <p class="text-xs text-gray-500 mt-1">–ë–ª–∏–∂–∞–π—à–µ–µ –º–µ—Ç—Ä–æ: –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è</p>

                    <div class="map-container mt-2">
                        <i class="fas fa-map-marked-alt text-xl mr-2"></i>
                        <span class="text-sm">–ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∑–¥–∞</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-modal" class="px-4 py-2 bg-primary-600 text-white rounded-full font-semibold hover:bg-primary-700 transition text-sm">
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="auth-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="text-lg font-bold" id="auth-modal-title">–í—Ö–æ–¥</h3>
                <button class="close-modal-btn" id="close-auth-modal-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="login-form" class="space-y-4">
                    <div>
                        <label for="login-phone" class="block text-primary-700 mb-2 font-medium">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-phone-alt text-primary-400"></i>
                            </div>
                            <input type="tel" id="login-phone" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="+7 (XXX) XXX-XX-XX" required>
                        </div>
                    </div>
                    <div>
                        <label for="login-password" class="block text-primary-700 mb-2 font-medium">–ü–∞—Ä–æ–ª—å</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-primary-400"></i>
                            </div>
                            <input type="password" id="login-password" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                        </div>
                    </div>
                    <button id="login-btn" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">–í–æ–π—Ç–∏</button>
                    <p class="text-center text-sm text-primary-600 cursor-pointer" id="switch-to-register">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</p>
                </div>
                <div id="register-form" class="space-y-4 hidden">
                    <div>
                        <label for="register-name" class="block text-primary-700 mb-2 font-medium">–ò–º—è</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-user text-primary-400"></i>
                            </div>
                            <input type="text" id="register-name" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="–í–∞—à–µ –∏–º—è" required>
                        </div>
                    </div>
                    <div>
                        <label for="register-phone" class="block text-primary-700 mb-2 font-medium">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-phone-alt text-primary-400"></i>
                            </div>
                            <input type="tel" id="register-phone" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="+7 (XXX) XXX-XX-XX" required>
                        </div>
                    </div>
                    <div>
                        <label for="register-password" class="block text-primary-700 mb-2 font-medium">–ü–∞—Ä–æ–ª—å</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-lock text-primary-400"></i>
                            </div>
                            <input type="password" id="register-password" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å" required>
                        </div>
                    </div>
                    <button id="register-btn" class="w-full gradient-bg text-white py-3 rounded-lg font-semibold hover:opacity-90 transition">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                    <p class="text-center text-sm text-primary-600 cursor-pointer" id="switch-to-login">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π–¥–∏—Ç–µ</p>
                </div>
                <div id="auth-error" class="hidden mt-4 p-4 bg-red-50 text-red-800 rounded-lg border border-red-200 flex items-center">
                    <i class="fas fa-exclamation-circle text-red-500 text-xl mr-3"></i>
                    <div>
                        <h4 class="font-bold">–û—à–∏–±–∫–∞!</h4>
                        <p id="auth-error-text" class="text-sm"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å -->
    <div id="client-view" class="fade-in">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="gradient-bg text-white shadow-lg scroll-reveal">
            <div class="container mx-auto px-4 py-6">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-spa text-3xl"></i>
                        <div>
                            <h1 class="text-2xl md:text-3xl font-bold">–ú–∞–Ω–∏–∫—é—Ä</h1>
                            <p class="text-sm text-primary-200">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –Ω–æ–≥—Ç—è–º–∏</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div id="user-info" class="hidden text-primary-200"></div>
                        <button id="auth-btn" class="bg-white text-primary-700 px-4 py-2 rounded-full font-semibold hover:bg-primary-100 transition flex items-center">
                            <i class="fas fa-user mr-2"></i><span id="auth-btn-text">–í–æ–π—Ç–∏</span>
                        </button>
                        <a href="admin.html" class="bg-white text-primary-700 px-4 py-2 rounded-full font-semibold hover:bg-primary-100 transition flex items-center">
                            <i class="fas fa-lock mr-2"></i>–ê–¥–º–∏–Ω
                        </a>
                    </div>
                </div>
            </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="container mx-auto px-4 py-8">
            <!-- –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è -->
            <section class="hero-section p-8 mb-12 scroll-reveal">
                <div class="hero-nail hero-nail-1"></div>
                <div class="hero-nail hero-nail-2"></div>
                <div class="hero-content text-center">
                    <h1 class="text-3xl md:text-4xl font-bold text-primary-800 mb-4">–ü—Ä–µ–æ–±—Ä–∞–∑–∏—Ç–µ —Å–≤–æ–∏ –Ω–æ–≥—Ç–∏ —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞–º–∏</h1>
                    <p class="text-lg text-primary-700 max-w-2xl mx-auto mb-8">
                        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å - –º–µ—Å—Ç–æ, –≥–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–∞.
                        –ù–∞—à –º–∞—Å—Ç–µ—Ä —Å –ª—é–±–æ–≤—å—é –∏ –≤–Ω–∏–º–∞–Ω–∏–µ–º –∫ –¥–µ—Ç–∞–ª—è–º —Å–æ–∑–¥–∞–¥—É—Ç –¥–ª—è –≤–∞—Å –∏–¥–µ–∞–ª—å–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä.
                    </p>
                    <a href="#booking-form-section" class="hero-btn gradient-bg text-white px-8 py-4 rounded-full font-bold text-lg inline-flex items-center floating">
                        <i class="fas fa-calendar-check mr-3"></i> –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω
                    </a>
                </div>
            </section>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- –§–æ—Ä–º–∞ –∑–∞–ø–∏—Å–∏ -->
                <div id="booking-form-section" class="md:col-span-2 bg-white rounded-xl shadow-xl p-6 neumorphic scroll-reveal">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary-100 p-3 rounded-full mr-4">
                            <i class="fas fa-calendar-plus text-primary-700 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-primary-800">–ó–∞–ø–∏—Å—å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä</h2>
                    </div>
                    <form id="booking-form" class="space-y-4">
                        <div id="name-field" class="hidden">
                            <label for="name" class="block text-primary-700 mb-2 font-medium">–í–∞—à–µ –∏–º—è</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-user text-primary-400"></i>
                                </div>
                                <input type="text" id="name" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤">
                            </div>
                        </div>
                        <div id="phone-field" class="hidden">
                            <label for="phone" class="block text-primary-700 mb-2 font-medium">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-phone-alt text-primary-400"></i>
                                </div>
                                <input type="tel" id="phone" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="+7 (XXX) XXX-XX-XX">
                            </div>
                        </div>
                        <div>
                            <label for="notes" class="block text-primary-700 mb-2 font-medium">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–ø–∏—Å–∏</label>
                            <div class="relative">
                                <div class="absolute top-3 left-3">
                                    <i class="fas fa-comment text-primary-400"></i>
                                </div>
                                <textarea id="notes" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"></textarea>
                            </div>
                        </div>
                        <div>
                            <label class="block text-primary-700 mb-2 font-medium">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</label>
                            <div class="flex items-center mb-3">
                                <i class="fas fa-calendar-alt text-primary-600 mr-2 calendar-icon"></i>
                                <span class="text-sm text-primary-600">–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—Ç—ã:</span>
                            </div>
                            <div id="dates-container" class="flex flex-wrap gap-3"></div>
                        </div>
                        <div>
                            <label for="time" class="block text-primary-700 mb-2 font-medium">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="far fa-clock text-primary-400"></i>
                                </div>
                                <select id="time" class="w-full pl-10 pr-4 py-3 border border-primary-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 appearance-none">
                                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è --</option>
                                </select>
                                <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                                    <i class="fas fa-chevron-down text-primary-400"></i>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="block text-primary-700 mb-2 font-medium">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —É—Å–ª—É–≥</label>
                            <div id="category-filter" class="flex flex-wrap gap-2 mb-3">
                                <button type="button" class="category-filter bg-primary-100 text-primary-700 px-4 py-2 rounded-full font-medium hover:bg-primary-200 transition" data-category="all">–í—Å–µ</button>
                                <button type="button" class="category-filter bg-primary-100 text-primary-700 px-4 py-2 rounded-full font-medium hover:bg-primary-200 transition" data-category="–ú–∞–Ω–∏–∫—é—Ä">–ú–∞–Ω–∏–∫—é—Ä</button>
                                <button type="button" class="category-filter bg-primary-100 text-primary-700 px-4 py-2 rounded-full font-medium hover:bg-primary-200 transition" data-category="–ü–µ–¥–∏–∫—é—Ä">–ü–µ–¥–∏–∫—é—Ä</button>
                                <button type="button" class="category-filter bg-primary-100 text-primary-700 px-4 py-2 rounded-full font-medium hover:bg-primary-200 transition" data-category="–î–∏–∑–∞–π–Ω">–î–∏–∑–∞–π–Ω</button>
                            </div>
                            <label class="block text-primary-700 mb-2 font-medium">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥–∏</label>
                            <div id="services-container" class="grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto p-3 border border-primary-200 rounded-lg scrollbar-hide neumorphic-inset"></div>
                        </div>
                        <div class="price-calculator p-4">
                            <h3 class="text-lg font-semibold text-primary-800 mb-2">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å</h3>
                            <div id="total-price" class="text-2xl font-bold text-primary-600">0‚ÇΩ</div>
                            <div id="total-duration" class="text-sm text-primary-600 mt-1">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 0 –º–∏–Ω</div>
                        </div>
                        <div class="pt-4">
                            <button type="submit" class="w-full gradient-bg text-white py-4 rounded-lg font-bold hover:opacity-90 transition flex items-center justify-center shadow-lg hover:shadow-xl">
                                <i class="fas fa-calendar-check mr-3"></i> –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                            </button>
                        </div>
                    </form>
                    <div id="error-message" class="hidden mt-6 p-4 bg-red-50 text-red-800 rounded-lg border border-red-200 flex items-center">
                        <i class="fas fa-exclamation-circle text-red-500 text-xl mr-3"></i>
                        <div>
                            <h4 class="font-bold">–û—à–∏–±–∫–∞!</h4>
                            <p id="error-text" class="text-sm"></p>
                        </div>
                    </div>
                </div>

                <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
                <div class="bg-white rounded-xl shadow-xl p-6 neumorphic scroll-reveal">
                    <div class="flex items-center mb-6">
                        <div class="bg-primary-100 p-3 rounded-full mr-4">
                            <i class="fas fa-bell text-primary-700 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-primary-800">–í–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
                    </div>
                    <div id="notifications-list" class="space-y-4">
                        <div class="text-center py-8 text-gray-400">
                            <i class="fas fa-bell-slash text-3xl mb-3"></i>
                            <p>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –†–∞–∑–¥–µ–ª "–û –Ω–∞—Å" -->
            <section id="about" class="mt-16 scroll-reveal">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ä–∞–∑–¥–µ–ª–∞ "–û –Ω–∞—Å" –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
            </section>
        </main>

        <!-- –ü–æ–¥–≤–∞–ª -->
        <footer class="gradient-bg text-white py-8 mt-12 scroll-reveal">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-6 md:mb-0">
                        <div class="flex items-center">
                            <i class="fas fa-spa text-2xl mr-3"></i>
                            <h3 class="text-xl font-bold">–ú–∞–Ω–∏–∫—é—Ä</h3>
                        </div>
                        <p class="text-primary-200 mt-2">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Ö–æ–¥ –∑–∞ –Ω–æ–≥—Ç—è–º–∏</p>
                    </div>
                    <div class="flex space-x-6">
                        <a href="#" class="text-white hover:text-primary-200 transition text-xl" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-white hover:text-primary-200 transition text-xl" title="VK">
                            <i class="fab fa-vk"></i>
                        </a>
                        <a href="#" class="text-white hover:text-primary-200 transition text-xl" title="WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a href="#" class="text-white hover:text-primary-200 transition text-xl" title="Telegram">
                            <i class="fab fa-telegram"></i>
                        </a>
                    </div>
                </div>
                <div class="mt-8 text-center text-primary-200 text-sm">
                    <p>¬© 2025 –ú–∞–Ω–∏–∫—é—Ä. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                    <p class="mt-1">–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123</p>
                </div>
            </div>
        </footer>
    </div>

    <script type="module">
        import {
            initializeDatabase,
            getUsers,
            addUser,
            getUserByPhone,
            getBookings,
            addBooking,
            getNotifications,
            markNotificationAsRead,
            getAvailableDates
        } from './database.js';

        // –î–∞–Ω–Ω—ã–µ –æ–± —É—Å–ª—É–≥–∞—Ö
        const servicesData = [
            { name: "–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä", price: 700, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 60 },
            { name: "–î–∏–∑–∞–π–Ω", price: 100, category: "–î–∏–∑–∞–π–Ω", duration: 30 },
            { name: "–§—Ä–µ–Ω—á, –û–º–±—Ä–µ", price: 200, category: "–î–∏–∑–∞–π–Ω", duration: 30 },
            { name: "–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏—è", price: 1200, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 90 },
            { name: "–†–µ–º–æ–Ω—Ç/–ù–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –Ω–æ–≥—Ç—è", price: 50, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 15 },
            { name: "–°–Ω—è—Ç–∏–µ", price: 0, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 20 },
            { name: "–°–Ω—è—Ç–∏–µ –±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è", price: 200, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 30 },
            { name: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–ª—å—á–∏–∫–æ–≤", price: 800, category: "–ü–µ–¥–∏–∫—é—Ä", duration: 45 },
            { name: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–ª—å—á–∏–∫–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º", price: 1000, category: "–ü–µ–¥–∏–∫—é—Ä", duration: 60 },
            { name: "–ü–µ–¥–∏–∫—é—Ä —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å—Ç–æ–ø—ã", price: 1300, category: "–ü–µ–¥–∏–∫—é—Ä", duration: 90 },
            { name: "–ü–µ–¥–∏–∫—é—Ä —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º", price: 1500, category: "–ü–µ–¥–∏–∫—é—Ä", duration: 90 },
            { name: "–ú–∞–Ω–∏–∫—é—Ä —Å —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ–º", price: 1200, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 90 },
            { name: "–ù–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ", price: 1500, category: "–ú–∞–Ω–∏–∫—é—Ä", duration: 120 }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            initializeDatabase();
            let currentUser = null;

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            function checkAuth() {
                const userPhone = sessionStorage.getItem('currentUserPhone');
                if (userPhone) {
                    currentUser = getUserByPhone(userPhone);
                    if (currentUser) {
                        document.getElementById('user-info').classList.remove('hidden');
                        document.getElementById('user-info').textContent = `–ü—Ä–∏–≤–µ—Ç, ${currentUser.name}`;
                        document.getElementById('auth-btn-text').textContent = '–í—ã–π—Ç–∏';
                        document.getElementById('name-field').classList.add('hidden');
                        document.getElementById('phone-field').classList.add('hidden');
                        showNotifications(userPhone);
                    }
                } else {
                    document.getElementById('user-info').classList.add('hidden');
                    document.getElementById('auth-btn-text').textContent = '–í–æ–π—Ç–∏';
                    document.getElementById('name-field').classList.remove('hidden');
                    document.getElementById('phone-field').classList.remove('hidden');
                    document.getElementById('notifications-list').innerHTML = `
                        <div class="text-center py-8 text-gray-400">
                            <i class="fas fa-bell-slash text-3xl mb-3"></i>
                            <p>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</p>
                        </div>
                    `;
                }
            }

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('auth-btn').addEventListener('click', function() {
                if (currentUser) {
                    sessionStorage.removeItem('currentUserPhone');
                    currentUser = null;
                    checkAuth();
                } else {
                    document.getElementById('auth-modal').classList.add('active');
                    document.getElementById('login-form').classList.remove('hidden');
                    document.getElementById('register-form').classList.add('hidden');
                    document.getElementById('auth-modal-title').textContent = '–í—Ö–æ–¥';
                }
            });

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
            document.getElementById('switch-to-register').addEventListener('click', function() {
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('register-form').classList.remove('hidden');
                document.getElementById('auth-modal-title').textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è';
            });

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥
            document.getElementById('switch-to-login').addEventListener('click', function() {
                document.getElementById('login-form').classList.remove('hidden');
                document.getElementById('register-form').classList.add('hidden');
                document.getElementById('auth-modal-title').textContent = '–í—Ö–æ–¥';
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            document.getElementById('close-auth-modal-btn').addEventListener('click', function() {
                document.getElementById('auth-modal').classList.remove('active');
                document.getElementById('auth-error').classList.add('hidden');
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ö–æ–¥–∞
            document.getElementById('login-btn').addEventListener('click', function() {
                const phone = document.getElementById('login-phone').value.trim();
                const password = document.getElementById('login-password').value;
                const user = getUserByPhone(phone);
                if (user && user.password === password) {
                    sessionStorage.setItem('currentUserPhone', phone);
                    currentUser = user;
                    document.getElementById('auth-modal').classList.remove('active');
                    checkAuth();
                } else {
                    showAuthError('–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            document.getElementById('register-btn').addEventListener('click', function() {
                const name = document.getElementById('register-name').value.trim();
                const phone = document.getElementById('register-phone').value.trim();
                const password = document.getElementById('register-password').value;
                if (!name || !phone || !password) {
                    showAuthError('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                    return;
                }
                if (getUserByPhone(phone)) {
                    showAuthError('–≠—Ç–æ—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    return;
                }
                addUser({
                    name,
                    phone,
                    password,
                    role: 'client'
                });
                sessionStorage.setItem('currentUserPhone', phone);
                currentUser = getUserByPhone(phone);
                document.getElementById('auth-modal').classList.remove('active');
                checkAuth();
            });

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            ['login-phone', 'register-phone', 'phone'].forEach(id => {
                document.getElementById(id).addEventListener('input', function(e) {
                    let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
                    e.target.value = !x[2] ? x[1] : x[1] + ' (' + x[2] + ') ' + x[3] + (x[4] ? '-' + x[4] : '') + (x[5] ? '-' + x[5] : '');
                });
            });

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —É—Å–ª—É–≥
            function populateServices(category = 'all') {
                const servicesContainer = document.getElementById('services-container');
                servicesContainer.innerHTML = '';
                const filteredServices = category === 'all' ? servicesData : servicesData.filter(s => s.category === category);
                filteredServices.forEach(service => {
                    const checkboxDiv = document.createElement('div');
                    checkboxDiv.className = 'flex items-center';
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `service-${service.name.replace(/\s+/g, '-')}`;
                    checkbox.name = 'services';
                    checkbox.value = service.name;
                    checkbox.dataset.price = service.price;
                    checkbox.dataset.duration = service.duration;
                    checkbox.className = 'service-checkbox h-5 w-5 text-primary-600 focus:ring-primary-500 border-primary-300 rounded cursor-pointer';
                    const label = document.createElement('label');
                    label.htmlFor = `service-${service.name.replace(/\s+/g, '-')}`;
                    label.className = 'service-label ml-3 text-sm text-primary-700 bg-primary-100 px-3 py-2 rounded-lg cursor-pointer transition';
                    label.textContent = `${service.name} (${service.price}‚ÇΩ ‚Ä¢ ${service.duration} –º–∏–Ω)`;
                    checkboxDiv.appendChild(checkbox);
                    checkboxDiv.appendChild(label);
                    servicesContainer.appendChild(checkboxDiv);
                    label.addEventListener('click', function(e) {
                        e.preventDefault();
                        checkbox.checked = !checkbox.checked;
                        checkbox.dispatchEvent(new Event('change'));
                    });
                    checkbox.addEventListener('change', function() {
                        updateServiceSelection(checkbox, label);
                        updateTotalPrice();
                    });
                });
                updateTotalPrice();
            }

            function updateServiceSelection(checkbox, label) {
                if (checkbox.checked) {
                    label.classList.add('bg-primary-600', 'text-white');
                } else {
                    label.classList.remove('bg-primary-600', 'text-white');
                }
            }

            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            document.querySelectorAll('.category-filter').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.category-filter').forEach(btn => {
                        btn.classList.remove('gradient-bg', 'text-white');
                        btn.classList.add('bg-primary-100', 'text-primary-700');
                    });
                    this.classList.add('gradient-bg', 'text-white');
                    this.classList.remove('bg-primary-100', 'text-primary-700');
                    populateServices(this.dataset.category);
                });
            });

            // –†–∞—Å—á–µ—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            function updateTotalPrice() {
                const checkboxes = document.querySelectorAll('input[name="services"]:checked');
                let totalPrice = 0;
                let totalDuration = 0;
                checkboxes.forEach(cb => {
                    totalPrice += parseInt(cb.dataset.price) || 0;
                    totalDuration += parseInt(cb.dataset.duration) || 0;
                });
                document.getElementById('total-price').textContent = `${totalPrice}‚ÇΩ`;
                document.getElementById('total-duration').textContent = `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${totalDuration} –º–∏–Ω`;
            }

            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç
            function populateAvailableDates() {
                const datesContainer = document.getElementById('dates-container');
                datesContainer.innerHTML = '';
                const availableDates = getAvailableDates();
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                const todayStr = today.toISOString().split('T')[0];
                const futureDates = availableDates.filter(dateObj => dateObj.date >= todayStr);
                if (futureDates.length === 0) {
                    datesContainer.innerHTML = '<p class="text-gray-500 py-4 text-center w-full">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏</p>';
                    return;
                }
                futureDates.sort((a, b) => new Date(a.date) - new Date(b.date));
                futureDates.forEach(dateObj => {
                    const dateStr = dateObj.date;
                    const dateParts = dateStr.split('-');
                    const displayDate = `${dateParts[2]}.${dateParts[1]}.${dateParts[0]}`;
                    const dateBadge = document.createElement('div');
                    dateBadge.className = 'date-badge bg-primary-100 text-primary-800 px-4 py-3 rounded-lg cursor-pointer text-center hover:bg-primary-200';
                    dateBadge.dataset.date = dateStr;
                    dateBadge.innerHTML = `
                        <div class="font-bold text-lg">${dateParts[2]}</div>
                        <div class="text-xs uppercase">${getMonthName(dateParts[1])}</div>
                    `;
                    dateBadge.addEventListener('click', function() {
                        document.querySelectorAll('.date-badge').forEach(badge => {
                            badge.classList.remove('gradient-bg', 'text-white', 'shadow-md');
                        });
                        this.classList.add('gradient-bg', 'text-white', 'shadow-md');
                        document.getElementById('selected-date').value = dateStr;
                        updateTimeSlots(dateStr);
                    });
                    datesContainer.appendChild(dateBadge);
                });
                if (!document.getElementById('selected-date')) {
                    const hiddenInput = document.createElement('input');
                    hiddenInput.type = 'hidden';
                    hiddenInput.id = 'selected-date';
                    hiddenInput.name = 'date';
                    datesContainer.parentNode.appendChild(hiddenInput);
                }
                if (futureDates.length > 0) {
                    const firstDateBadge = datesContainer.querySelector('.date-badge');
                    if (firstDateBadge) {
                        firstDateBadge.click();
                    }
                }
            }

            function updateTimeSlots(dateStr) {
                const timeSelect = document.getElementById('time');
                timeSelect.innerHTML = '<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è --</option>';
                const availableDates = getAvailableDates();
                const dateObj = availableDates.find(d => d.date === dateStr);
                if (dateObj && dateObj.times) {
                    const bookings = getBookings();
                    const selectedServices = Array.from(document.querySelectorAll('input[name="services"]:checked')).map(cb => parseInt(cb.dataset.duration));
                    const totalDuration = selectedServices.reduce((sum, duration) => sum + duration, 0);
                    dateObj.times.forEach(time => {
                        const selectedTime = new Date(`${dateStr}T${time}`);
                        const endTime = new Date(selectedTime.getTime() + totalDuration * 60000);
                        const isOverlapping = bookings.some(booking => {
                            if (booking.date !== dateStr) return false;
                            const bookingStart = new Date(`${booking.date}T${booking.time}`);
                            const bookingDuration = booking.services.reduce((total, service) => {
                                const serviceData = servicesData.find(s => s.name === service);
                                return total + (serviceData ? serviceData.duration : 0);
                            }, 0);
                            const bookingEnd = new Date(bookingStart.getTime() + bookingDuration * 60000);
                            return (selectedTime < bookingEnd && endTime > bookingStart);
                        });
                        if (!isOverlapping) {
                            const option = document.createElement('option');
                            option.value = time;
                            option.textContent = time;
                            timeSelect.appendChild(option);
                        }
                    });
                    if (timeSelect.options.length === 1) {
                        showError('–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∞—Ç—É –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—Å–ª—É–≥');
                    }
                }
            }

            function getMonthName(monthNum) {
                const months = ['–Ø–Ω–≤', '–§–µ–≤', '–ú–∞—Ä', '–ê–ø—Ä', '–ú–∞–π', '–ò—é–Ω', '–ò—é–ª', '–ê–≤–≥', '–°–µ–Ω', '–û–∫—Ç', '–ù–æ—è', '–î–µ–∫'];
                return months[parseInt(monthNum) - 1];
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
            function checkTimeOverlap(date, time, duration) {
                const bookings = getBookings();
                const selectedTime = new Date(`${date}T${time}`);
                const endTime = new Date(selectedTime.getTime() + duration * 60000);
                return bookings.some(booking => {
                    if (booking.date !== date) return false;
                    const bookingStart = new Date(`${booking.date}T${booking.time}`);
                    const bookingDuration = booking.services.reduce((total, service) => {
                        const serviceData = servicesData.find(s => s.name === service);
                        return total + (serviceData ? serviceData.duration : 0);
                    }, 0);
                    const bookingEnd = new Date(bookingStart.getTime() + bookingDuration * 60000);
                    return (selectedTime < bookingEnd && endTime > bookingStart);
                });
            }

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            function formatDateForDisplay(dateStr) {
                const [year, month, day] = dateStr.split('-');
                const months = ['—è–Ω–≤–∞—Ä—è', '—Ñ–µ–≤—Ä–∞–ª—è', '–º–∞—Ä—Ç–∞', '–∞–ø—Ä–µ–ª—è', '–º–∞—è', '–∏—é–Ω—è', '–∏—é–ª—è', '–∞–≤–≥—É—Å—Ç–∞', '—Å–µ–Ω—Ç—è–±—Ä—è', '–æ–∫—Ç—è–±—Ä—è', '–Ω–æ—è–±—Ä—è', '–¥–µ–∫–∞–±—Ä—è'];
                return `${parseInt(day)} ${months[parseInt(month) - 1]} ${year}`;
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            function showConfirmationModal(booking) {
                document.getElementById('confirmation-name').textContent = booking.name;
                document.getElementById('confirmation-datetime').textContent = `${formatDateForDisplay(booking.date)} –≤ ${booking.time}`;
                const servicesList = booking.services.map(service => {
                    const serviceData = servicesData.find(s => s.name === service);
                    return `${service} (${serviceData.price}‚ÇΩ)`;
                }).join(', ');
                document.getElementById('confirmation-services').textContent = servicesList;
                const totalPrice = booking.services.reduce((total, service) => {
                    const serviceData = servicesData.find(s => s.name === service);
                    return total + (serviceData ? serviceData.price : 0);
                }, 0);
                document.getElementById('confirmation-price').textContent = `${totalPrice}‚ÇΩ`;
                document.getElementById('confirmation-modal').classList.add('active');
            }

            // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            document.getElementById('close-modal').addEventListener('click', function() {
                document.getElementById('confirmation-modal').classList.remove('active');
            });
            document.getElementById('close-modal-btn').addEventListener('click', function() {
                document.getElementById('confirmation-modal').classList.remove('active');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            function showNotifications(phone) {
                const notificationsList = document.getElementById('notifications-list');
                notificationsList.innerHTML = '';
                const notifications = getNotifications().filter(n => n.phone === phone && !n.read);
                if (notifications.length === 0) {
                    notificationsList.innerHTML = `
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-bell-slash text-2xl mb-2"></i>
                            <p>–ù–µ—Ç –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
                        </div>
                    `;
                    return;
                }
                notifications.forEach(notification => {
                    const notificationDiv = document.createElement('div');
                    notificationDiv.className = 'notification';
                    notificationDiv.innerHTML = `
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-green-500 mr-3"></i>
                            <div>
                                <p class="text-sm text-primary-700">${notification.message}</p>
                                <p class="text-xs text-gray-500 mt-1">${new Date(notification.timestamp).toLocaleString('ru-RU')}</p>
                            </div>
                        </div>
                    `;
                    notificationsList.appendChild(notificationDiv);
                    markNotificationAsRead(notification.id);
                });
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã
            const bookingForm = document.getElementById('booking-form');
            bookingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                let name = currentUser ? currentUser.name : document.getElementById('name').value;
                let phone = currentUser ? currentUser.phone : document.getElementById('phone').value;
                const date = document.getElementById('selected-date').value;
                const time = document.getElementById('time').value;
                const notes = document.getElementById('notes').value;
                if (!currentUser && (!name || !phone)) {
                    showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –∏–º–µ–Ω–∏ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                    return;
                }
                if (!date) {
                    showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É');
                    return;
                }
                if (!time) {
                    showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è');
                    return;
                }
                const selectedServices = [];
                let totalDuration = 0;
                document.querySelectorAll('input[name="services"]:checked').forEach(cb => {
                    selectedServices.push(cb.value);
                    totalDuration += parseInt(cb.dataset.duration);
                });
                if (selectedServices.length === 0) {
                    showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —É—Å–ª—É–≥—É');
                    return;
                }
                if (checkTimeOverlap(date, time, totalDuration)) {
                    showError('–í—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–Ω—è—Ç–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è.');
                    return;
                }
                const booking = {
                    name,
                    phone,
                    date,
                    time,
                    services: selectedServices,
                    notes
                };
                addBooking(booking);
                addNotification({
                    phone,
                    message: `–í–∞—à–∞ –∑–∞–ø–∏—Å—å –Ω–∞ ${formatDateForDisplay(date)} –≤ ${time} —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞.`
                });
                showConfirmationModal(booking);
                bookingForm.reset();
                document.querySelectorAll('.service-label').forEach(label => {
                    label.classList.remove('bg-primary-600', 'text-white');
                });
                document.querySelectorAll('.date-badge').forEach(badge => {
                    badge.classList.remove('gradient-bg', 'text-white', 'shadow-md');
                });
                updateTotalPrice();
            });

            function showError(message) {
                document.getElementById('error-text').textContent = message;
                document.getElementById('error-message').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('error-message').classList.add('hidden');
                }, 5000);
            }

            function showAuthError(message) {
                document.getElementById('auth-error-text').textContent = message;
                document.getElementById('auth-error').classList.remove('hidden');
                setTimeout(() => {
                    document.getElementById('auth-error').classList.add('hidden');
                }, 5000);
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            checkAuth();
            populateServices();
            populateAvailableDates();

            // Scroll reveal animation
            const scrollElements = document.querySelectorAll('.scroll-reveal');
            const revealOnScroll = () => {
                scrollElements.forEach(element => {
                    const elementTop = element.getBoundingClientRect().top;
                    const windowHeight = window.innerHeight;
                    if (elementTop < windowHeight - 100) {
                        element.classList.add('visible');
                    }
                });
            };
            window.addEventListener('scroll', revealOnScroll);
            revealOnScroll();
        });
    </script>
</body>
</html>